<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml">
    <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core" />
  </edmx:Reference>
  <edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Measures.V1.xml">
    <edmx:Include Namespace="Org.OData.Measures.V1" Alias="Measures" />
  </edmx:Reference>
  <edmx:Reference Uri="/SalesDocument.svc/$metadata">
    <edmx:Include Namespace="SalesDocument" Alias="service" />
  </edmx:Reference>
  <edmx:DataServices>
    <Schema Namespace="signature.sample" Alias="self" xmlns="http://docs.oasis-open.org/odata/ns/edm">

      <Annotation Term="Core.LongDescription">
        <String>The [implementation](#ReturnsOrderWeight) differs from the [signature](#SalesDocumentWeight) in the following allowed ways:
- Specialized binding parameter type from `Edm.EntityType` to a concrete entity type  
  When displaying a sales order entity of the binding parameter type, the client can invoke the function
  and offer a tooltip containing weight information about the sales document.
  (Specialization would also be allowed for types of non-binding parameters.)
- Specialized return type from [`self.QuantityUnitType`](#QuantityUnitType) to [`self.ReturnsOrderWeightType`](#ReturnsOrderWeightType)  
  The client could display the additional return type property `PackagingWeight`
  according to the [instruction](#SalesDocumentWeightType) about additional weight properties,
  or could ignore it.</String>
      </Annotation>

      <Function Name="SalesDocumentWeight" IsBound="true">
        <Annotation Term="Core.IsSignature" />
        <Annotation Term="Core.Description" String="Determines weight information about a sales document" />
        <Parameter Name="SalesDocument" Type="Edm.EntityType" Nullable="false" />
        <ReturnType Type="self.SalesDocumentWeightType" Nullable="false" />
      </Function>
      <ComplexType Name="SalesDocumentWeightType">
        <Annotation Term="Core.Description" String="Weight of a sales order" />
        <Annotation Term="Core.LongDescription">
          <String>Subtypes of this type may contain additional weight properties that use the same `Unit`
          and can be displayed next to the `GoodsWeight`.</String>
        </Annotation>
        <Property Name="GoodsWeight" Type="Edm.Decimal" Nullable="false">
          <Annotation Term="Core.Description" String="Weight of the goods being sold" />
          <Annotation Term="Measures.Unit" Path="Unit" />
        </Property>
        <Property Name="Unit" Type="Edm.String" Nullable="false">
          <Annotation Term="Core.Description" String="Unit of all weights" />
        </Property>
      </ComplexType>

      <Function Name="ReturnsOrderWeight" IsBound="true">
        <Annotation Term="Core.ImplementsSignature" String="self.SalesDocumentWeight" />
        <Parameter Name="SalesDocument" Type="service.ReturnsOrderType" Nullable="false" />
        <ReturnType Type="self.ReturnsOrderWeightType" Nullable="false" />
      </Function>
      <ComplexType Name="ReturnsOrderWeightType" BaseType="self.SalesDocumentWeightType">
        <Property Name="PackagingWeight" Type="Edm.Decimal" Nullable="false">
          <Annotation Term="Measures.Unit" Path="Unit" />
          <Annotation Term="Core.Description" String="Weight of the packaging" />
        </Property>
      </ComplexType>

    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
